x-defaults: &defaults
  restart: unless-stopped
  networks:
    - my_network
  stop_grace_period: 0s
  environment:
    - OPENAI_API_KEY=$OPENAI_API_KEY

networks:
  my_network:
    external: true

services:
  mensa:
    image: python
    container_name: mensa
    <<: *defaults
    volumes:
      - /mnt/docker/public/mensa:/app
    working_dir: /app
    entrypoint: python -m http.server 80

  yauk-net:
    image: jay817/streamlit
    container_name: yauk-net
    <<: *defaults
    volumes:
      - /mnt/docker/public/yauk-net:/app